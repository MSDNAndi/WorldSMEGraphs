#!/bin/bash
# Quick Start Script for Domain Maturity Tracking
# Makes it easy to assess domains and generate dashboards

set -e

REPO_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/../../.." && pwd)"
TRACKER="$REPO_ROOT/.project/agents/domain-maturity/domain_maturity_tracker.py"
DASHBOARD="$REPO_ROOT/.project/agents/domain-maturity/generate_dashboard.py"

# Colors for output
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
NC='\033[0m' # No Color

show_help() {
    cat << EOF
Domain Maturity Tracking - Quick Start

Usage: $0 <command> [options]

Commands:
    assess <domain-path>     Assess a specific domain
    dashboard                Show dashboard for all domains
    dashboard-html           Generate HTML dashboard
    history <domain-path>    Show historical progress
    target <domain-path> <level>  Show requirements for target level
    all                      Scan all domains (detailed)
    help                     Show this help message

Examples:
    $0 assess science/physics/quantum-mechanics/planck-units
    $0 dashboard
    $0 dashboard-html > maturity.html
    $0 history science/physics/quantum-mechanics/planck-units
    $0 target science/physics/quantum-mechanics/planck-units 3
    $0 all

EOF
}

case "${1:-help}" in
    assess)
        if [ -z "$2" ]; then
            echo -e "${RED}Error: Domain path required${NC}"
            echo "Usage: $0 assess <domain-path>"
            exit 1
        fi
        echo -e "${BLUE}Assessing domain: $2${NC}"
        python "$TRACKER" --domain "$2"
        ;;
    
    dashboard)
        echo -e "${BLUE}Generating dashboard...${NC}"
        python "$DASHBOARD"
        ;;
    
    dashboard-html)
        python "$DASHBOARD" --format html
        ;;
    
    history)
        if [ -z "$2" ]; then
            echo -e "${RED}Error: Domain path required${NC}"
            echo "Usage: $0 history <domain-path>"
            exit 1
        fi
        echo -e "${BLUE}Historical progress for: $2${NC}"
        python "$TRACKER" --domain "$2" --history
        ;;
    
    target)
        if [ -z "$2" ] || [ -z "$3" ]; then
            echo -e "${RED}Error: Domain path and target level required${NC}"
            echo "Usage: $0 target <domain-path> <level>"
            echo "Level must be 1-5"
            exit 1
        fi
        echo -e "${BLUE}Target level analysis for: $2 â†’ Level $3${NC}"
        python "$TRACKER" --domain "$2" --target-level "$3"
        ;;
    
    all)
        echo -e "${BLUE}Scanning all domains...${NC}"
        python "$TRACKER" --all
        ;;
    
    help|--help|-h)
        show_help
        ;;
    
    *)
        echo -e "${RED}Unknown command: $1${NC}"
        echo ""
        show_help
        exit 1
        ;;
esac
